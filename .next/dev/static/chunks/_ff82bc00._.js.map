{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///I:/projects/dev-v0/booking-showcase-v2/hooks/use-cart.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useReducer, useCallback, useEffect } from 'react'\nimport { CartState, CartItem } from '@/lib/types/cart'\n\nconst CartContext = createContext<CartState | undefined>(undefined)\n\ntype CartAction =\n  | { type: 'ADD_ITEM'; payload: Omit<CartItem, 'quantity'> }\n  | { type: 'REMOVE_ITEM'; payload: string }\n  | { type: 'UPDATE_QUANTITY'; payload: { id: string; quantity: number } }\n  | { type: 'CLEAR_CART' }\n  | { type: 'LOAD_CART'; payload: CartState }\n\nconst CART_STORAGE_KEY = 'bookstore_cart'\n\nfunction cartReducer(state: CartState, action: CartAction): CartState {\n  let newState: CartState\n  \n  switch (action.type) {\n    case 'ADD_ITEM': {\n      const existingItem = state.items.find(item => item.id === action.payload.id)\n      \n      if (existingItem) {\n        newState = {\n          ...state,\n          items: state.items.map(item =>\n            item.id === action.payload.id\n              ? { ...item, quantity: item.quantity + 1 }\n              : item\n          ),\n          totalItems: state.totalItems + 1,\n          totalPrice: state.totalPrice + action.payload.price\n        }\n      } else {\n        newState = {\n          ...state,\n          items: [...state.items, { ...action.payload, quantity: 1 }],\n          totalItems: state.totalItems + 1,\n          totalPrice: state.totalPrice + action.payload.price\n        }\n      }\n      break\n    }\n      \n    case 'REMOVE_ITEM': {\n      const itemToRemove = state.items.find(item => item.id === action.payload)\n      if (!itemToRemove) return state\n      \n      newState = {\n        ...state,\n        items: state.items.filter(item => item.id !== action.payload),\n        totalItems: Math.max(0, state.totalItems - itemToRemove.quantity),\n        totalPrice: Math.max(0, state.totalPrice - (itemToRemove.price * itemToRemove.quantity))\n      }\n      break\n    }\n      \n    case 'UPDATE_QUANTITY': {\n      const { id, quantity } = action.payload\n      if (quantity < 1) return state\n      \n      const itemToUpdate = state.items.find(item => item.id === id)\n      if (!itemToUpdate) return state\n      \n      const quantityDiff = quantity - itemToUpdate.quantity\n      \n      newState = {\n        ...state,\n        items: state.items.map(item =>\n          item.id === id ? { ...item, quantity } : item\n        ),\n        totalItems: state.totalItems + quantityDiff,\n        totalPrice: state.totalPrice + (quantityDiff * itemToUpdate.price)\n      }\n      break\n    }\n      \n    case 'CLEAR_CART':\n      newState = { items: [], totalItems: 0, totalPrice: 0, addItem: () => {},\n        removeItem: () => {}, updateQuantity: () => {}, clearCart: () => {}}\n      break\n      \n    case 'LOAD_CART':\n      return action.payload\n      \n    default:\n      return state\n  }\n  \n  // Save to localStorage whenever cart changes\n  if (typeof window !== 'undefined') {\n    const { addItem, removeItem, updateQuantity, clearCart, ...persistableState } = newState\n    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(persistableState))\n  }\n  \n  return newState\n}\n\nexport function CartProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(cartReducer, {\n    items: [],\n    totalItems: 0,\n    totalPrice: 0,\n    addItem: () => {},\n    removeItem: () => {},\n    updateQuantity: () => {},\n    clearCart: () => {}\n  })\n  \n  // Load cart from localStorage on mount\n  useEffect(() => {\n    if (typeof window === 'undefined') return\n    \n    try {\n      const savedCart = localStorage.getItem(CART_STORAGE_KEY)\n      if (savedCart) {\n        const parsedCart = JSON.parse(savedCart)\n        dispatch({ type: 'LOAD_CART', payload: { ...parsedCart, addItem, removeItem, updateQuantity, clearCart } })\n      }\n    } catch (error) {\n      console.error('Failed to load cart from localStorage', error)\n    }\n  }, [])\n  \n  const addItem = useCallback((item: Omit<CartItem, 'quantity'>) => {\n    dispatch({ type: 'ADD_ITEM', payload: item })\n  }, [])\n  \n  const removeItem = useCallback((id: string) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: id })\n  }, [])\n  \n  const updateQuantity = useCallback((id: string, quantity: number) => {\n    dispatch({ type: 'UPDATE_QUANTITY', payload: { id, quantity } })\n  }, [])\n  \n  const clearCart = useCallback(() => {\n    dispatch({ type: 'CLEAR_CART' })\n  }, [])\n  \n  const value = {\n    ...state,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart\n  }\n  \n  return <CartContext.Provider value={value}>{children}</CartContext.Provider>\n}\n\nexport function useCart() {\n  const context = useContext(CartContext)\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///I:/projects/dev-v0/booking-showcase-v2/app/client-layout.tsx"],"sourcesContent":["\"use client\";\n\nimport type React from \"react\";\nimport { CartProvider } from \"@/hooks/use-cart\";\nimport { Toaster } from \"sonner\";\n// import Footer from \"@/components/footer\";\n\nexport default function ClientLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <CartProvider>\n      {children}\n      {/* <Footer /> */}\n      <Toaster position=\"top-center\" richColors closeButton />\n    </CartProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAOe,SAAS,aAAa,EACnC,QAAQ,EAGT;IACC,qBACE,4TAAC,wIAAY;;YACV;0BAED,4TAAC,sRAAO;gBAAC,UAAS;gBAAa,UAAU;gBAAC,WAAW;;;;;;;;;;;;AAG3D;KAZwB"}}]
}