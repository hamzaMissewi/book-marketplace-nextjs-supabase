module.exports=[88785,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},15208,(a,b,c)=>{"use strict";var d=a.r(88785);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},5783,(a,b,c)=>{b.exports=a.r(15208)()},74520,a=>{"use strict";var b,c=a.i(46447),d=a.i(30564),e=a.i(32360),f=a.i(3130),g=a.i(40695);let h=(0,a.i(61237).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=a.i(35561);function j({items:a,onRemove:b,onCheckout:d,isCheckingOut:e}){let j=(a.reduce((a,b)=>a+b.price_cents,0)/100).toFixed(2);return 0===a.length?(0,c.jsx)(f.Card,{children:(0,c.jsxs)(f.CardContent,{className:"pt-6",children:[(0,c.jsx)("p",{className:"text-center text-muted-foreground",children:"Your cart is empty"}),(0,c.jsx)(i.default,{href:"/browse",className:"block mt-4",children:(0,c.jsx)(g.Button,{className:"w-full",children:"Continue Shopping"})})]})}):(0,c.jsxs)(f.Card,{children:[(0,c.jsx)(f.CardHeader,{children:(0,c.jsx)(f.CardTitle,{children:"Order Summary"})}),(0,c.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,c.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map(a=>(0,c.jsxs)("div",{className:"flex items-start justify-between p-3 bg-muted rounded",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"font-medium text-sm",children:a.title}),(0,c.jsx)("p",{className:"text-xs text-muted-foreground",children:a.author}),(0,c.jsxs)("p",{className:"text-sm font-semibold mt-1",children:["$",(a.price_cents/100).toFixed(2)]})]}),(0,c.jsx)("button",{onClick:()=>b(a.id),className:"ml-2 text-muted-foreground hover:text-foreground",children:(0,c.jsx)(h,{className:"w-4 h-4"})})]},a.id))}),(0,c.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,c.jsx)("span",{className:"font-semibold",children:"Total:"}),(0,c.jsxs)("span",{className:"text-2xl font-bold",children:["$",j]})]}),(0,c.jsx)(g.Button,{onClick:d,disabled:e||0===a.length,className:"w-full",size:"lg",children:e?"Processing...":"Proceed to Checkout"})]})]})]})}var k=a.i(5783);function l(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function m(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?l(Object(c),!0).forEach(function(b){o(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):l(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function n(a){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function o(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function p(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c,d,e=a&&("undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"]);if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(a){h=!0,d=a}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(a,b)||function(a,b){if(a){if("string"==typeof a)return q(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return q(a,b)}}(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var r=function(a,b,c){var e=!!c,f=d.default.useRef(c);d.default.useEffect(function(){f.current=c},[c]),d.default.useEffect(function(){if(!e||!a)return function(){};var c=function(){f.current&&f.current.apply(f,arguments)};return a.on(b,c),function(){a.off(b,c)}},[e,b,a,f])},s=function(a){var b=d.default.useRef(a);return d.default.useEffect(function(){b.current=a},[a]),b.current},t=function(a){return null!==a&&"object"===n(a)},u="[object Object]",v=function a(b,c){if(!t(b)||!t(c))return b===c;var d=Array.isArray(b);if(d!==Array.isArray(c))return!1;var e=Object.prototype.toString.call(b)===u;if(e!==(Object.prototype.toString.call(c)===u))return!1;if(!e&&!d)return b===c;var f=Object.keys(b),g=Object.keys(c);if(f.length!==g.length)return!1;for(var h={},i=0;i<f.length;i+=1)h[f[i]]=!0;for(var j=0;j<g.length;j+=1)h[g[j]]=!0;var k=Object.keys(h);return k.length===f.length&&k.every(function(d){return a(b[d],c[d])})},w="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",x=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;if(null===a||t(a)&&"function"==typeof a.elements&&"function"==typeof a.createToken&&"function"==typeof a.createPaymentMethod&&"function"==typeof a.confirmCardPayment)return a;throw Error(b)},y=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;if(t(a)&&"function"==typeof a.then)return{tag:"async",stripePromise:Promise.resolve(a).then(function(a){return x(a,b)})};var c=x(a,b);return null===c?{tag:"empty"}:{tag:"sync",stripe:c}},z=function(a){a&&a._registerWrapper&&a.registerAppInfo&&(a._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),a.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},A=d.default.createContext(null);A.displayName="ElementsContext";var B=function(a,b){if(!a)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(b," in an <Elements> provider."));return a};k.default.any,k.default.object,k.default.func.isRequired;var C=d.default.createContext(null);C.displayName="CheckoutContext",k.default.any,k.default.shape({clientSecret:k.default.oneOfType([k.default.string,k.default.instanceOf(Promise)]).isRequired,elementsOptions:k.default.object}).isRequired;var D=function(a){var b=d.default.useContext(C),c=d.default.useContext(A);if(!b)return B(c,a);if(!c)return b;throw Error("You cannot wrap the part of your app that ".concat(a," in both <CheckoutProvider> and <Elements> providers."))},E=["mode"],F=function(a,b){var c="".concat(a.charAt(0).toUpperCase()+a.slice(1),"Element"),e=b?function(a){D("mounts <".concat(c,">"));var b=a.id,e=a.className;return d.default.createElement("div",{id:b,className:e})}:function(b){var e,f=b.id,g=b.className,h=b.options,i=void 0===h?{}:h,j=b.onBlur,k=b.onFocus,l=b.onReady,n=b.onChange,q=b.onEscape,u=b.onClick,w=b.onLoadError,x=b.onLoaderStart,y=b.onNetworksChange,z=b.onConfirm,A=b.onCancel,B=b.onShippingAddressChange,C=b.onShippingRateChange,F=b.onSavedPaymentMethodRemove,G=b.onSavedPaymentMethodUpdate,H=D("mounts <".concat(c,">")),I="elements"in H?H.elements:null,J="checkoutState"in H?H.checkoutState:null,K=(null==J?void 0:J.type)==="success"||(null==J?void 0:J.type)==="loading"?J.sdk:null,L=p(d.default.useState(null),2),M=L[0],N=L[1],O=d.default.useRef(null),P=d.default.useRef(null);r(M,"blur",j),r(M,"focus",k),r(M,"escape",q),r(M,"click",u),r(M,"loaderror",w),r(M,"loaderstart",x),r(M,"networkschange",y),r(M,"confirm",z),r(M,"cancel",A),r(M,"shippingaddresschange",B),r(M,"shippingratechange",C),r(M,"savedpaymentmethodremove",F),r(M,"savedpaymentmethodupdate",G),r(M,"change",n),l&&(e="expressCheckout"===a?l:function(){l(M)}),r(M,"ready",e),d.default.useLayoutEffect(function(){if(null===O.current&&null!==P.current&&(I||K)){var b=null;if(K)switch(a){case"payment":b=K.createPaymentElement(i);break;case"address":if("mode"in i){var d=i.mode,e=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(i,E);if("shipping"===d)b=K.createShippingAddressElement(e);else if("billing"===d)b=K.createBillingAddressElement(e);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":b=K.createExpressCheckoutElement(i);break;case"currencySelector":b=K.createCurrencySelectorElement();break;case"taxId":b=K.createTaxIdElement(i);break;default:throw Error("Invalid Element type ".concat(c,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(b=I.create(a,i));O.current=b,N(b),b&&b.mount(P.current)}},[I,K,i]);var Q=s(i);return d.default.useEffect(function(){if(O.current){var a,b,c,d=(a=i,b=Q,c=["paymentRequest"],t(a)?Object.keys(a).reduce(function(d,e){var f=!t(b)||!v(a[e],b[e]);return c.includes(e)?(f&&console.warn("Unsupported prop change: options.".concat(e," is not a mutable property.")),d):f?m(m({},d||{}),{},o({},e,a[e])):d},null):null);d&&"update"in O.current&&O.current.update(d)}},[i,Q]),d.default.useLayoutEffect(function(){return function(){if(O.current&&"function"==typeof O.current.destroy)try{O.current.destroy(),O.current=null}catch(a){}}},[]),d.default.createElement("div",{id:f,className:g,ref:P})};return e.propTypes={id:k.default.string,className:k.default.string,onChange:k.default.func,onBlur:k.default.func,onFocus:k.default.func,onReady:k.default.func,onEscape:k.default.func,onClick:k.default.func,onLoadError:k.default.func,onLoaderStart:k.default.func,onNetworksChange:k.default.func,onConfirm:k.default.func,onCancel:k.default.func,onShippingAddressChange:k.default.func,onShippingRateChange:k.default.func,onSavedPaymentMethodRemove:k.default.func,onSavedPaymentMethodUpdate:k.default.func,options:k.default.object},e.displayName=c,e.__elementType=a,e},G=d.default.createContext(null);G.displayName="EmbeddedCheckoutProviderContext";var H=function(){var a=d.default.useContext(G);if(!a)throw Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return a},I=function(a){var b=a.stripe,c=a.options,e=a.children,f=d.default.useMemo(function(){return y(b,"Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[b]),g=d.default.useRef(null),h=d.default.useRef(null),i=p(d.default.useState({embeddedCheckout:null}),2),j=i[0],k=i[1];d.default.useEffect(function(){if(!h.current&&!g.current){var a=function(a){h.current||g.current||(h.current=a,g.current=h.current.initEmbeddedCheckout(c).then(function(a){k({embeddedCheckout:a})}))};"async"===f.tag&&!h.current&&(c.clientSecret||c.fetchClientSecret)?f.stripePromise.then(function(b){b&&a(b)}):"sync"===f.tag&&!h.current&&(c.clientSecret||c.fetchClientSecret)&&a(f.stripe)}},[f,c,j,h]),d.default.useEffect(function(){return function(){j.embeddedCheckout?(g.current=null,j.embeddedCheckout.destroy()):g.current&&g.current.then(function(){g.current=null,j.embeddedCheckout&&j.embeddedCheckout.destroy()})}},[j.embeddedCheckout]),d.default.useEffect(function(){z(h)},[h]);var l=s(b);d.default.useEffect(function(){null!==l&&l!==b&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[l,b]);var m=s(c);return d.default.useEffect(function(){if(null!=m){if(null==c)return void console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them.");void 0===c.clientSecret&&void 0===c.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=m.clientSecret&&c.clientSecret!==m.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.fetchClientSecret&&c.fetchClientSecret!==m.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=m.onComplete&&c.onComplete!==m.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=m.onShippingDetailsChange&&c.onShippingDetailsChange!==m.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=m.onLineItemsChange&&c.onLineItemsChange!==m.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")}},[m,c]),d.default.createElement(G.Provider,{value:j},e)},J=function(a){var b=a.id,c=a.className;return H(),d.default.createElement("div",{id:b,className:c})};F("auBankAccount",!0),F("card",!0),F("cardNumber",!0),F("cardExpiry",!0),F("cardCvc",!0),F("iban",!0),F("payment",!0),F("expressCheckout",!0),F("paymentRequestButton",!0),F("linkAuthentication",!0),F("address",!0),F("shippingAddress",!0),F("paymentMethodMessaging",!0),F("taxId",!0);var K="clover";"".concat("https://js.stripe.com","/").concat(K,"/stripe.js");var L=function(a,b){a&&a._registerWrapper&&a._registerWrapper({name:"stripe-js",version:"8.5.1",startTime:b})},M=null,N=function(a,b,c){if(null===a)return null;var d,e=b[0].match(/^pk_test/),f=3===(d=a.version)?"v3":d;e&&f!==K&&console.warn("Stripe.js@".concat(f," was loaded on the page, but @stripe/stripe-js@").concat("8.5.1"," expected Stripe.js@").concat(K,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=a.apply(void 0,b);return L(g,c),g},O=!1,P=function(){return b?b:b=(null!==M?M:(M=new Promise(function(a,b){a(null)})).catch(function(a){return M=null,Promise.reject(a)})).catch(function(a){return b=null,Promise.reject(a)})};Promise.resolve().then(function(){return P()}).catch(function(a){O||console.warn(a)});var Q=a.i(24802),R=(0,Q.createServerReference)("40e79a728a9ccb2f756b999a99d793d002fe723b2b",Q.callServer,void 0,Q.findSourceMapURL,"startCheckoutSession");let S=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];O=!0;var d=Date.now();return P().then(function(a){return N(a,b,d)})}(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY);function T({bookIds:a}){let b=(0,d.useCallback)(async()=>{let b=await R(a);if(!b)throw Error("Failed to create checkout session");return b},[a]);return(0,c.jsx)("div",{id:"checkout",children:(0,c.jsx)(I,{stripe:S,options:{fetchClientSecret:b},children:(0,c.jsx)(J,{})})})}function U(){let[a,b]=(0,d.useState)([]),[g,h]=(0,d.useState)(!1),[i,k]=(0,d.useState)(!1),[l,m]=(0,d.useState)(!0);(0,d.useEffect)(()=>{let a=localStorage.getItem("bookstore-cart");if(a)try{b(JSON.parse(a))}catch(a){console.error("Failed to load cart:",a)}m(!1)},[]),(0,d.useEffect)(()=>{localStorage.setItem("bookstore-cart",JSON.stringify(a))},[a]);let n=a=>{b(b=>b.filter(b=>b.id!==a))},o=()=>{k(!0),h(!0)};return l?(0,c.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,c.jsx)(e.Navigation,{}),(0,c.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,c.jsx)("p",{children:"Loading..."})})]}):(0,c.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,c.jsx)(e.Navigation,{}),(0,c.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Shopping Cart"}),g?(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,c.jsx)("div",{className:"lg:col-span-2",children:(0,c.jsx)(f.Card,{children:(0,c.jsx)(f.CardContent,{className:"pt-6",children:(0,c.jsx)(T,{bookIds:a.map(a=>a.id)})})})}),(0,c.jsx)("div",{className:"lg:col-span-1",children:(0,c.jsx)(j,{items:a,onRemove:n,onCheckout:o,isCheckingOut:i})})]}):(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,c.jsx)("div",{className:"lg:col-span-2",children:a.length>0?(0,c.jsxs)(f.Card,{children:[(0,c.jsx)(f.CardHeader,{children:(0,c.jsxs)(f.CardTitle,{children:["Books in Cart (",a.length,")"]})}),(0,c.jsx)(f.CardContent,{children:(0,c.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,c.jsxs)("div",{className:"flex items-start justify-between p-4 border border-border rounded-lg",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h3",{className:"font-semibold",children:a.title}),(0,c.jsx)("p",{className:"text-sm text-muted-foreground",children:a.author}),(0,c.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.category," â€¢ ",a.book_type]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsxs)("p",{className:"text-lg font-bold",children:["$",(a.price_cents/100).toFixed(2)]}),(0,c.jsx)("button",{onClick:()=>n(a.id),className:"text-xs text-destructive hover:underline mt-2",children:"Remove"})]})]},a.id))})})]}):(0,c.jsx)(f.Card,{children:(0,c.jsx)(f.CardContent,{className:"pt-6",children:(0,c.jsx)("p",{className:"text-center text-muted-foreground",children:"Your cart is empty. Start shopping!"})})})}),(0,c.jsx)("div",{className:"lg:col-span-1",children:(0,c.jsx)(j,{items:a,onRemove:n,onCheckout:o,isCheckingOut:i})})]})]})]})}a.s(["default",()=>U],74520)}];

//# sourceMappingURL=_94b3416b._.js.map