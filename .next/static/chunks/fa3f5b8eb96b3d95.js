(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78928,e=>{"use strict";var s=e.i(1972),t=e.i(75305),r=e.i(13474),a=e.i(70065),l=e.i(20755),d=e.i(30499),i=e.i(2854),c=e.i(67881),n=e.i(28849);function o(){let e=(0,d.useRouter)(),[o,x]=(0,t.useState)([]),[m,h]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{(async()=>{let s=(0,l.createClient)(),{data:{user:t}}=await s.auth.getUser();if(!t)return e.push("/auth/login");let{data:r,error:a}=await s.from("orders").select(`*,
           order_items(
             id,
             price_cents,
             books(title, author, cover_image_url)
           )`).eq("user_id",t.id).order("created_at",{ascending:!1});!a&&r&&x(r),h(!1)})()},[e]),m)?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(r.Navigation,{}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("p",{children:"Loading..."})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(r.Navigation,{}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Dashboard"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"pt-6",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Orders"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2",children:o.length})]})}),(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"pt-6",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Completed"}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-2",children:o.filter(e=>"completed"===e.status).length})]})}),(0,s.jsx)(a.Card,{children:(0,s.jsxs)(a.CardContent,{className:"pt-6",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),(0,s.jsxs)("p",{className:"text-3xl font-bold mt-2",children:["$",(o.reduce((e,s)=>e+s.total_amount_cents,0)/100).toFixed(2)]})]})})]}),(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsx)(a.CardTitle,{children:"Recent Orders"})}),(0,s.jsx)(a.CardContent,{children:0===o.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"No orders yet. Start exploring our catalog!"}),(0,s.jsx)(i.default,{href:"/browse",children:(0,s.jsx)(c.Button,{children:"Browse Books"})})]}):(0,s.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Order ID: ",e.id.slice(0,8)]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold",children:["$",(e.total_amount_cents/100).toFixed(2)]}),(0,s.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mt-2 ${(e=>{switch(e){case"completed":return"bg-green-500/10 text-green-700";case"pending":return"bg-yellow-500/10 text-yellow-700";case"failed":return"bg-red-500/10 text-red-700";default:return"bg-gray-500/10 text-gray-700"}})(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]}),e.order_items&&e.order_items.length>0&&(0,s.jsx)("div",{className:"space-y-2 pt-3 border-t border-border",children:e.order_items.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.books.cover_image_url&&(0,s.jsx)("div",{className:"relative w-10 h-12 bg-muted rounded overflow-hidden flex-shrink-0",children:(0,s.jsx)(n.default,{src:e.books.cover_image_url||"/placeholder.svg",alt:e.books.title,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium truncate",children:e.books.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.books.author})]}),(0,s.jsxs)("p",{className:"text-sm font-semibold flex-shrink-0",children:["$",(e.price_cents/100).toFixed(2)]})]},e.id))})]},e.id))})})]})]})]})}e.s(["default",()=>o])}]);